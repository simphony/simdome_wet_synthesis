/*--------------------------------*- C++ -*----------------------------------*\
  =========                 |
  \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox
   \\    /   O peration     | Website:  https://openfoam.org
    \\  /    A nd           | Version:  8
     \\/     M anipulation  |
\*---------------------------------------------------------------------------*/
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;
    location    "system";
    object      controlDict;
}
// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

#include "$FOAM_CASE/include/input"

application     simpleEnvMixing;

startFrom       latestTime;

startTime       0;

stopAt          endTime;

endTime         $t0;

deltaT          1;

writeControl    runTime;

writeInterval   1;

purgeWrite      0;

writeFormat     ascii;

writePrecision  6;

writeCompression off;

timeFormat      general;

timePrecision   6;

runTimeModifiable true;

functions
{
    #includeFunc  residuals_CFD
    // #includeFunc  residuals

    // underRelaxationUpdate
    // {
    //     type              timeActivatedFileUpdate;
    //     libs              ("libutilityFunctionObjects.so");
    //     fileToUpdate      "$FOAM_CASE/system/fvSolution";
    //     timeVsFile
    //     (
    //         (-1 "$FOAM_CASE/system/updatingFiles/fvSolution.cfd")
            
    //         (15000 "$FOAM_CASE/system/updatingFiles/fvSolution.0") // 0.3
    //         (16000 "$FOAM_CASE/system/updatingFiles/fvSolution.1") // 0.5
    //         (17000 "$FOAM_CASE/system/updatingFiles/fvSolution.2") // 0.7
    //         (18000 "$FOAM_CASE/system/updatingFiles/fvSolution.3") // 0.9

    //         (20000 "$FOAM_CASE/system/updatingFiles/fvSolution.0") // 0.3
    //         (21000 "$FOAM_CASE/system/updatingFiles/fvSolution.1") // 0.5
    //         (22000 "$FOAM_CASE/system/updatingFiles/fvSolution.2") // 0.7
    //         (30000 "$FOAM_CASE/system/updatingFiles/fvSolution.3") // 0.9
    //     );
    // }

    // timeStepUpdate
    // {
    //     type              timeActivatedFileUpdate;
    //     libs              ("libutilityFunctionObjects.so");
    //     fileToUpdate      "$FOAM_CASE/system/controlDict";
    //     timeVsFile
    //     (
    //         (-1 "$FOAM_CASE/system/updatingFiles/controlDict.0") 
    //         ($t0 "$FOAM_CASE/system/updatingFiles/controlDict.1") 
    //         // ($t2 "$FOAM_CASE/system/updatingFiles/controlDict.1") 
    //     );
    // }

    // fvSolutionUpdate
    // {
    //     type              timeActivatedFileUpdate;
    //     libs              ("libutilityFunctionObjects.so");
    //     fileToUpdate      "$FOAM_CASE/system/fvSolution";
    //     timeVsFile
    //     (
    //         (-1 "$FOAM_CASE/system/updatingFiles/fvSolution.0") // 1e-6
    //         ($t0 "$FOAM_CASE/system/updatingFiles/fvSolution.1") // 5e-6
    //         // ($t2 "$FOAM_CASE/constant/updatingFiles/fvSolution.1") // 5e-6
    //     );
    // }

    // schemeChange
    // {
    //     type              timeActivatedFileUpdate;
    //     libs              ("libutilityFunctionObjects.so");
    //     fileToUpdate      "$FOAM_CASE/system/fvSchemes";
    //     timeVsFile
    //     (
    //         (-1 "$FOAM_CASE/system/updatingFiles/fvSchemes.0")
    //         ($t0 "$FOAM_CASE/system/updatingFiles/fvSchemes.1")
    //         ($t1 "$FOAM_CASE/system/updatingFiles/fvSchemes.2")
    //         ($t3 "$FOAM_CASE/system/updatingFiles/fvSchemes.3")
    //     );
    // }

    dissVolAverage
    {
        type            volFieldValue;
        libs            ("libfieldFunctionObjects.so");

        log             false;
        writeControl      timeStep;
        writeInterval     $write_interval;
        writeFields     false;

        regionType      all;
        // name            c0;
        operation       volAverage;

        // weightField     alpha1;

        fields
        (
            epsilon
        );
    }

    outflow
    {
        type            surfaceFieldValue;
        libs            ("libfieldFunctionObjects.so");

        log             true;
        writeControl      timeStep;
        writeInterval     $write_interval;
        writeFields     false;

        surfaceFormat   none;
        regionType      patch;
        name            outlet;

        operation       sum;

        // weightField     alpha1;

        fields
        (
            phi
        );
    }

    // pReactingVolAverage
    // {
    //     type            volFieldValue;
    //     libs            ("libfieldFunctionObjects.so");

    //     log             false;
    //     writeControl      timeStep;
    //     writeInterval     $write_interval;
    //     writeFields     false;

    //     regionType      all;
    //     // name            c0;
    //     operation       volAverage;

    //     // weightField     alpha1;

    //     fields
    //     (
    //         p_reacting
    //     );
    // }
}

// ************************************************************************* //
